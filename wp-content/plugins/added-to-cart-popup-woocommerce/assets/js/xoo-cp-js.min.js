jQuery(document).ready(function(a){function t(t,c){a.ajax({url:xoo_cp_localize.homeurl+"/?wc-ajax=xoo_cp_add_to_cart",data:a.param(c),type:"POST",success:function(c,e,n){t.hasClass(".ajax_add_to_cart")||t.removeClass("xoo-cp-adding").addClass("xoo-cp-added");var i=a(".xoo-cp-atcn");c.error?i.html(c.error):c.cart_html?(i.html('<div class="xoo-cp-success"><i class="fa fa-check" aria-hidden="true"></i> '+c.pname+" "+r.added+"</div>"),a(".xoo-cp-content").html(c.cart_html),o(c.ajax_fragm)):(console.log(c),i.html("Something went wrong , contact administrator")),a(".xoo-cp-opac").show(),a(".xoo-cp-modal").addClass("xoo-cp-active")}})}function o(t){var o=t.fragments;t.cart_hash;o&&a.each(o,function(t){a(t).addClass("updating")}),o&&a.each(o,function(t,o){a(t).replaceWith(o)}),a(".widget_shopping_cart, .updating").stop(!0).css("opacity","1").unblock()}function c(t){a.each(t.target.classList,function(t,o){("xoo-cp-close"==o||"xoo-cp-modal"==o)&&(a(".xoo-cp-opac").hide(),a(".xoo-cp-modal").removeClass("xoo-cp-active"),a(".xoo-cp-atcn , .xoo-cp-content").html(""))})}function e(t,o,c){return a.ajax({url:xoo_cp_localize.adminurl,type:"POST",data:{action:"xoo_cp_change_ajax",cart_key:t,new_qty:o,pid:c}})}function n(t,c){a(".xoo-cp-outer").show();var n=t.parents(".xoo-cp-pdetails"),s=n.data("cp"),d=s.key,p=s.pname,l=n.find(".xoo-cp-qty");e(d,c).done(function(t,e,n){a(".xoo-cp-outer").hide(),n.getResponseHeader("content-type").indexOf("text/html")>=0?(a(".xoo-cp-atcn").html(t),l.val(i)):(a(".xoo-cp-atcn").html('<div class="xoo-cp-success"><i class="xcp-icon xcp-icon-checkmark"></i> '+p+" "+r.updated+"</div>"),a(".xcp-ptotal").html(t.ptotal),l.val(c),o(t.ajax_fragm))})}var i,r=JSON.parse(xoo_cp_localize.xcp_text);a(document).on("submit","form.cart",function(o){o.preventDefault();var c=a(this),e=c.find('button[type="submit"]');e.removeClass("xoo-cp-added").addClass("xoo-cp-adding");var n=c.serializeArray();e.attr("name")&&"add-to-cart"==e.attr("name")&&e.attr("value")&&n.push({name:"add-to-cart",value:e.attr("value")}),n.push({name:"action",value:"xoo_cp_add_to_cart"}),t(e,n)}),xoo_cp_localize.enshop&&a(".add_to_cart_button").on("click",function(o){o.preventDefault();var c=a(this);if(!c.hasClass("product_type_variable")){c.removeClass("xoo-cp-added").addClass("xoo-cp-adding");var e=c.data("product_id"),n=c.data("quantity");if(void 0===e||null===e){var i=a(this).attr("href");if(-1===i.indexOf("?add-to-cart"))return;var r=i.substring(i.indexOf("?add-to-cart")+1).split("&"),s=[];if(a.each(r,function(a,t){s.push(t.split("="))}),a.each(s,function(a,t){"add-to-cart"==t[0]?e=t[1]:"quantity"==t[0]&&(n=t[1])}),!e)return}var d={};d.product_id=d["add-to-cart"]=e,d.variation_id=0,d.quantity=n||1,d.action="xoo_cp_add_to_cart",t(c,d)}}),a(document).on("click",".xoo-cp-close",c),a(".xoo-cp-modal").on("click",c),a(document).on("focusin",".xoo-cp-qty",function(){i=a(this).val()}),a(document).on("change",".xoo-cp-qty",function(t){var o=a(this),c=parseInt(a(this).val()),e=parseInt(a(this).attr("step")),r=parseInt(a(this).attr("min")),s=parseInt(a(this).attr("max")),d=!1;return 0===c?void o.parents(".xoo-cp-pdetails").find(".xoo-cp-remove .xcp-icon").trigger("click"):(isNaN(c)||0>c?d=!0:c>s&&s>0?(alert("Maximum Quantity: "+s),d=!0):r>c?d=!0:c%e!==0?(alert("Quantity can only be purchased in multiple of "+e),d=!0):n(o,c),void(d===!0&&a(this).val(i)))}),a(document).on("click",".xcp-chng",function(){var t=a(this),o=t.siblings(".xoo-cp-qty");o.trigger("focusin");var c=parseInt(o.val()),e=parseInt(o.attr("step")),i=parseInt(o.attr("min")),r=parseInt(o.attr("max"));if(t.hasClass("xcp-plus")){var s=c+e;if(s>r&&r>0)return void alert("Maximum Quantity: "+r)}else if(t.hasClass("xcp-minus")){var s=c-e;if(0===s)return void t.parents(".xoo-cp-pdetails").find(".xoo-cp-remove .xcp-icon").trigger("click");if(i>s)return;if(0>c)return void alert("Invalid")}n(t,s)}),a(document).on("click",".xoo-cp-remove .xcp-icon",function(){a(".xoo-cp-outer").show();var t=a(this),c=t.parents(".xoo-cp-pdetails").data("cp"),n=c.key,i=c.pname;e(n,0).done(function(t){a(".xoo-cp-content").html(""),a(".xoo-cp-atcn").html('<div class="xoo-cp-success"><i class="fa fa-check" aria-hidden="true"></i> '+i+" "+r.removed+"</div>"),a(".xoo-cp-outer").hide(),o(t.ajax_fragm)})})});